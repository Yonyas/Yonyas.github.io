{"componentChunkName":"component---src-templates-blog-post-js","path":"/삽질기/npm error부터 firebase hosting error까지 해결기록/","result":{"data":{"site":{"siteMetadata":{"title":"Yonyas 블로그","author":"Jiyon Lee","siteUrl":"https://yonyas.github.io","comment":{"disqusShortName":"","utterances":"Yonyas/blog-comments"},"sponsor":{"buyMeACoffeeId":"jbee"}}},"markdownRemark":{"id":"270c1b72-48f6-514f-b81a-f073c4c77714","excerpt":"리액트로 넷플릭스클론앱을 만들고 있던 도중 나온 에러들과 해결기록 (window) 중간중간 에러가 날 때 node_modules 폴더를 삭제하고  하고 를 다시 하면 해결이 되었다. 나왔던 에러 No render method found on the returned component instance code: ‘MODULENOTFOUND’ …  그런데 을 할 때마다 deprecated warnings 들이 주루룩 뜨는게 신경쓰였다. \nnode…","html":"<h2 id=\"리액트로-넷플릭스클론앱을-만들고-있던-도중-나온-에러들과-해결기록-window\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%EC%95%A1%ED%8A%B8%EB%A1%9C-%EB%84%B7%ED%94%8C%EB%A6%AD%EC%8A%A4%ED%81%B4%EB%A1%A0%EC%95%B1%EC%9D%84-%EB%A7%8C%EB%93%A4%EA%B3%A0-%EC%9E%88%EB%8D%98-%EB%8F%84%EC%A4%91-%EB%82%98%EC%98%A8-%EC%97%90%EB%9F%AC%EB%93%A4%EA%B3%BC-%ED%95%B4%EA%B2%B0%EA%B8%B0%EB%A1%9D-window\" aria-label=\"리액트로 넷플릭스클론앱을 만들고 있던 도중 나온 에러들과 해결기록 window permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리액트로 넷플릭스클론앱을 만들고 있던 도중 나온 에러들과 해결기록 (window)</h2>\n<p>중간중간 에러가 날 때 node_modules 폴더를 삭제하고 <code class=\"language-text\">npm install</code> 하고 <code class=\"language-text\">npm run start</code>를 다시 하면 해결이 되었다.</p>\n<p>나왔던 에러</p>\n<ul>\n<li>No render method found on the returned component instance</li>\n<li>code: ‘MODULE<em>NOT</em>FOUND’ … </li>\n</ul>\n<p>그런데 <code class=\"language-text\">npm install</code>을 할 때마다 deprecated warnings 들이 주루룩 뜨는게 신경쓰였다.\nnode를 아직 안배웠지만 아! 이건 업그레이드를 해주면 되나? 싶어서 node와 npm을 업그레이드 해봤다. 보니까 node를 설치하면 npm은 자동설치가 된다. <strong>윈도우에서 node 업데이트 할 때는 그냥 공식홈에서 node 를 다시 설치</strong>해주면 된다. 그러면 npm은?\n알아보니까 npm update는 <code class=\"language-text\">npm i -g npm-upgrade</code>로 실행했다. </p>\n<p>이제 최신버전을 가지고 기쁜 맘으로 코드를 이리저리 만지고 다시 넷플릭스클론앱에서\n<code class=\"language-text\">npm run start</code>를 하는데 온갖 에러들이 튀어나왔다. 캡쳐를 했어야 했는데😥\n이때는 내 코드가 잘못됐나 싶어서 계속 이리저리 바꿔보다가 “아니다 코드는 잘못된게 없는 것 같다. 뭐가 문제지?” 하다가 업그레이드한게 생각이 났다.</p>\n<p>node의 안정적 버전이 아니라서 그런가? 싶어서 지우고 LTS 버전으로 설치했다.\n혹시 몰라서 <code class=\"language-text\">npm i -g npm-upgrade</code>은 하지 않았다.\n그랬더니..</p>\n<h2 id=\"mimelookup-is-not-a-function\" style=\"position:relative;\"><a href=\"#mimelookup-is-not-a-function\" aria-label=\"mimelookup is not a function permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>mime.lookup is not a function</h2>\n<p>에러가 떴다.\n<img src=\"https://images.velog.io/images/yonyas/post/5d8f1dc2-665e-4814-8e44-320fc9bdae6b/mim.png\">\n찾아보니까 에러를 뿜는 곳, node_modules\\send\\index.js 에서 838줄과 845줄을 수정하면 된다.\n<em>(참고: 2. mime.lookup 에러)</em></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">mime<span class=\"token punctuation\">.</span><span class=\"token function\">lookup</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span>            <span class=\"token operator\">--</span><span class=\"token operator\">></span>  mime<span class=\"token punctuation\">.</span><span class=\"token function\">getType</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span>\nmime<span class=\"token punctuation\">.</span>charsets<span class=\"token punctuation\">.</span><span class=\"token function\">lookup</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span>   <span class=\"token operator\">--</span><span class=\"token operator\">></span>  mime<span class=\"token punctuation\">.</span><span class=\"token function\">getType</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span></code></pre></div>\n<p>이제 <code class=\"language-text\">npm run start</code>는 잘 되었다.</p>\n<p>문제는 앱 완성 후 <code class=\"language-text\">npm build</code>를 하려 하는데..</p>\n<h2 id=\"cannot-read-property-then-of-undefined\" style=\"position:relative;\"><a href=\"#cannot-read-property-then-of-undefined\" aria-label=\"cannot read property then of undefined permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cannot read property ‘then’ of undefined</h2>\n<p>에러가 떴다.\n<img src=\"https://images.velog.io/images/yonyas/post/0ec9b948-8670-40ce-83e1-ff10537e388a/then.png\">\n분명 <code class=\"language-text\">npm run start</code>는 되는데 왜 같은 코드인데 <code class=\"language-text\">npm build</code>는 안될까? 뭔가 웹팩과 바벨 문제인가? 하지만 나는 create-react-app으로 만들었기 때문에 그리고 아직 웹팩 바벨을 만지는 엄두가 나지 않아서 다른 해결방법을 열심히 찾아보았다.\n참고로 node_modules 폴더 삭제 방법은 더이상 먹히지 않았다.</p>\n<p>현재 코드구조가 axios를 이용해서 movie api를 받고, 이 movie api와 movie-trailer npm 을 사용해서 youtube url을 받고, 영화예고편을 틀어주는 것이다. then, catch 를 처음 사용해보았는데 저기 있는 저 then 때문이구나! 싶어서 알아보니까 <strong>youtube url을 받고 이를 바로 활용하지 말고 중간에 다른 함수를 써 넣어주면</strong> 해결이 되는 것 같았다. <em>(참고: 3. then 에러1)</em></p>\n<p>그래도 계속 같은 에러가 났다.\n찾아보니까 <strong>async, await 을 쓰면 then을 안 써도 되는 것 같았다</strong>. <em>(참고: 4. await 사용)</em>\n좋아 then을 아예 없애보자! 하고 수정했지만 계속 똑같은 에러가 났다…\n아니 then도 없는데 무슨 then을 읽지 못한다는거지? </p>\n<p>그렇구나 내 코드에러가 아니라 node, npm 저것들의 문제겠구나.\n그럼 npm 업데이트를 또 해볼까.. 했더니 도돌이표로 첫번째 에러가 또 생겼다.\n다시 node LTS 버전 설치 후 고민했다. 캐쉬 문제인가 윈도우 문제인가.. 이래서 리눅스 쓰나..</p>\n<p>좋아 그럼 npm 보다 yarn 이 좀더 좋다고 하는데 yarn 을 사용해보자.\n<code class=\"language-text\">yarn build</code> 하니까 또 에러..\nyarn은 업데이트 안해봤으니까 해봐야겠지 !\n<strong><code class=\"language-text\">yarn upgrade</code> 하니까 뭔가 주루룩 설치되었고</strong> !!</p>\n<h2 id=\"react-scripts은는-내부-또는-외부-명령-실행할-수-있는-프로그램-또는-배치-파일이-아닙니다\" style=\"position:relative;\"><a href=\"#react-scripts%EC%9D%80%EB%8A%94-%EB%82%B4%EB%B6%80-%EB%98%90%EB%8A%94-%EC%99%B8%EB%B6%80-%EB%AA%85%EB%A0%B9-%EC%8B%A4%ED%96%89%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8A%94-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8-%EB%98%90%EB%8A%94-%EB%B0%B0%EC%B9%98-%ED%8C%8C%EC%9D%BC%EC%9D%B4-%EC%95%84%EB%8B%99%EB%8B%88%EB%8B%A4\" aria-label=\"react scripts은는 내부 또는 외부 명령 실행할 수 있는 프로그램 또는 배치 파일이 아닙니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>‘react-scripts’은(는) 내부 또는 외부 명령, 실행할 수 있는 프로그램, 또는 배치 파일이 아닙니다.</h2>\n<p>에러가 드디어 바뀌었다. 😭\n<img src=\"https://images.velog.io/images/yonyas/post/3394c637-f757-4d39-99aa-88f15f3402a9/react-script.png\">\n검색해보니 <code class=\"language-text\">yarn add react-scripts</code>를 해주면 되는 문제였다. <em>(참고: 5.react-scripts 에러)</em></p>\n<p>드디어 호스팅을 해보는구나 !! 싶었다.\n<code class=\"language-text\">firebase init</code> <code class=\"language-text\">firbase deploy</code>를 하는데\n<img src=\"https://images.velog.io/images/yonyas/post/5eedfa28-e93a-4160-b303-8da3188057b1/1Wv9O.png\">\n내 앱이 아니라 이 화면만 자꾸 보여줬다.\n허참.\n또 찾아보니까 <code class=\"language-text\">npm install -g firebase-tools</code>를 하면 된다고 한다. <em>(참고: 6.firebase-tools설치)</em>\n나는 이제 yarn을 쓰기로 맘먹었는데 yarn 버전의 명령어는 찾다가 실패했다. 그냥 알려준대로 npm 으로 firebase-tools를 설치하고 다시 <code class=\"language-text\">firebase init</code>을 했다.</p>\n<p>나중에 알게됐는데 <code class=\"language-text\">npm install -g firebase-tools</code> 명령어를 관리자모드에서 안치면 에러가 떴다. 처음 호스팅 할 때 저 명령어를 친것 같은데 호스팅한다고 흥분해가지고 에러뜬걸 못보고 지나간 것 같다.</p>\n<p>쨋든 그랬더니.. 드디어 해결\n주소를 누르니까 이쁜 넷플릭스 클론앱이 나왔다.😆</p>\n<p>쨘 <a href=\"https://netflix-clone-83541.web.app/\">https://netflix-clone-83541.web.app/</a>\n<img src=\"https://images.velog.io/images/yonyas/post/f9d752ee-a176-4bc4-8571-f31d5e8ed830/%EC%9D%B4%EB%AF%B8%EC%A7%80%203.png\"></p>\n<p><br><br><br><br><br><br></p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ol>\n<li>넷플릭스클론 튜토리얼 <a href=\"https://www.youtube.com/watch?v=XtMThy8QKqU\">https://www.youtube.com/watch?v=XtMThy8QKqU</a></li>\n<li>mime.lookup 에러 <a href=\"https://github.com/smogon/pokemon-showdown/issues/4134\">https://github.com/smogon/pokemon-showdown/issues/4134</a></li>\n<li>then 에러1 <a href=\"https://study-develop.tistory.com/2\">https://study-develop.tistory.com/2</a></li>\n<li>await 사용 <a href=\"https://ko.javascript.info/async-await\">https://ko.javascript.info/async-await</a></li>\n<li>react-scripts 에러 <a href=\"https://thespoiler.tistory.com/21\">https://thespoiler.tistory.com/21</a></li>\n<li>firebase-tools 설치 <a href=\"https://blog.roto.codes/deploy-react-app-to-firebase/\">https://blog.roto.codes/deploy-react-app-to-firebase/</a></li>\n</ol>","frontmatter":{"title":"npm error부터 firebase hosting error까지 해결기록","date":"February 16, 2021"}}},"pageContext":{"slug":"/삽질기/npm error부터 firebase hosting error까지 해결기록/","previous":null,"next":{"fields":{"slug":"/CSS/검색창 클릭시 아이콘 포함 테두리 생기기/"},"frontmatter":{"title":"[CSS] 검색창 클릭시 아이콘 포함 테두리 생기기"}}}},"staticQueryHashes":["2486386679","3128451518"]}